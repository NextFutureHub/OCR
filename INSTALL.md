# Инструкция по установке и запуску

## Системные требования

- Python 3.8 или выше
- 4 ГБ RAM (рекомендуется 8 ГБ)
- 2 ГБ свободного места на диске

## Установка

### 1. Клонирование репозитория
```bash
git clone <repository-url>
cd OCR
```

### 2. Создание виртуального окружения
```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 3. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 4. Установка EasyOCR (дополнительно)
EasyOCR автоматически загрузит необходимые модели при первом запуске.

## Запуск

### 1. Запуск сервера
```bash
python run_server.py
```

Или напрямую:
```bash
python main.py
```

### 2. Проверка работы
Откройте браузер и перейдите по адресу: `http://localhost:8000`

### 3. Документация API
Документация доступна по адресу: `http://localhost:8000/docs`

## Тестирование

### 1. Запуск тестов
```bash
python test_api.py
```

### 2. Запуск примеров
```bash
python examples.py
```

## Конфигурация

### Переменные окружения
Создайте файл `.env` в корне проекта:

```env
# Основные настройки
DEBUG=False
HOST=0.0.0.0
PORT=8000

# Настройки OCR
OCR_LANGUAGES=ru,en
OCR_GPU_ENABLED=False
OCR_MIN_CONFIDENCE=0.5

# Настройки обработки
MAX_IMAGE_SIZE=10485760
LOG_LEVEL=INFO

# Настройки производительности
MAX_WORKERS=4
REQUEST_TIMEOUT=300
```

### Настройка языков
По умолчанию поддерживаются русский и английский языки. Для добавления других языков измените `OCR_LANGUAGES` в файле `config.py`.

## Использование с Docker

### 1. Создание Dockerfile
```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["python", "run_server.py"]
```

### 2. Сборка и запуск
```bash
docker build -t ocr-api .
docker run -p 8000:8000 ocr-api
```

## Производительность

### Оптимизация для GPU
Для использования GPU установите:
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

Затем установите `OCR_GPU_ENABLED=True` в конфигурации.

### Масштабирование
Для обработки больших объемов данных:
1. Увеличьте `MAX_WORKERS` в конфигурации
2. Используйте балансировщик нагрузки
3. Настройте кэширование

## Мониторинг

### Логи
Логи сохраняются в файл `ocr_api.log` и выводятся в консоль.

### Метрики
API предоставляет следующие метрики:
- Время обработки
- Точность OCR (CER, WER)
- Качество извлечения данных
- Статистика ошибок

## Устранение неполадок

### Проблема: Сервер не запускается
**Решение:**
1. Проверьте, что порт 8000 свободен
2. Убедитесь, что все зависимости установлены
3. Проверьте логи на наличие ошибок

### Проблема: Низкая точность OCR
**Решение:**
1. Улучшите качество входных изображений
2. Используйте предобработку изображений
3. Настройте параметры OCR

### Проблема: Медленная обработка
**Решение:**
1. Включите GPU (если доступен)
2. Увеличьте количество воркеров
3. Оптимизируйте размер изображений

## Поддержка

При возникновении проблем:
1. Проверьте логи в файле `ocr_api.log`
2. Убедитесь, что все зависимости установлены
3. Проверьте конфигурацию в файле `config.py`

## Лицензия

MIT License
